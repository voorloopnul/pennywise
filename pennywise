#!/usr/bin/env python
import os
import sys

import toml
from it.core.base import Tool

if __name__ == '__main__':
    cmd_database = toml.load("pennywise.toml")
    cmd = sys.argv[1]

    if cmd == "--help":
        print("Show help")
        sys.exit(0)

    elif cmd in cmd_database.keys():
        current_dir = os.getcwd()
        image = cmd_database[cmd]["image"]
        prefix_cmd = cmd_database[cmd]["prefix_cmd"]

        tool = Tool(image, prefix_cmd)
        tool.run(sys.argv[2:], current_dir)

    else:
        print("Pennywise can't change into this tool.")
